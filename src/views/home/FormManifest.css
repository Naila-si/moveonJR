/* =========================================================
   KAWAII UI — Form Manifest
   Drop-in replacement untuk FormManifest.css
   ======================================================= */

/* ---------- CSS RESET RINGAN ---------- */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  background: #f8fbff;
  color: #27364a;
}

/* ---------- THEME TOKENS (PASTEL) ---------- */
:root{
  --ink: #27364a;
  --ink-soft: #5d6c86;
  --bg: #f8fbff;

  /* pastel palette */
  --p1: #b9e6ff;   /* baby-blue */
  --p2: #ffd1f0;   /* bubblegum pink */
  --p3: #fff2b3;   /* lemon cream */
  --p4: #d9ffd8;   /* mint */
  --p5: #e6e1ff;   /* lilac */

  /* surfaces */
  --card: #ffffff;
  --card-alt: #fffaf7;

  /* accents */
  --brand: #7bb6ff;
  --brand-ink: #0b273b;
  --focus: #ffc27a;

  /* shadows & radii */
  --shadow-lg: 0 18px 40px rgba(21, 43, 77, .12), 0 6px 16px rgba(21, 43, 77, .08);
  --shadow-sm: 0 6px 14px rgba(21, 43, 77, .08);
  --radius-xl: 20px;
  --radius-lg: 16px;
  --radius-md: 14px;

  /* fluid typography */
  --fz-title: clamp(20px, 3.2vw, 28px);
  --fz-sub: clamp(13px, 1.6vw, 15px);
  --fz-body: clamp(14px, 1.7vw, 16px);
  --fz-label: clamp(13px, 1.5vw, 14px);
}

/* =========================================================
   NAVBAR — Kawaii Glass, tengah, dengan bubble anim
   ======================================================= */
.nav-kawaii-fixed{
  position: sticky; top: 0; z-index: 1000;
  backdrop-filter: blur(10px);
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
  border-bottom: 1px solid rgba(123,182,255,.25);
}

.nav-inner{
  height: 58px;
  display: flex; align-items: center; justify-content: center;
  gap: 12px; position: relative;
  padding: 0 16px;
}

.nav-menu{
  display: flex; align-items: center; justify-content: center;
  gap: clamp(8px, 1.5vw, 16px); flex-wrap: wrap;
}

.nav-item{
  text-decoration: none;
  font-weight: 800;
  font-size: clamp(13px, 1.6vw, 14px);
  color: #5a72a0;
  padding: 8px 12px;
  border-radius: 999px;
  background: radial-gradient(120% 140% at 10% 10%, rgba(185,230,255,.5), rgba(255,255,255,.6));
  box-shadow: inset 0 -2px 0 rgba(0,0,0,.05), 0 2px 0 rgba(0,0,0,.04);
  transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
}
.nav-item:hover{ transform: translateY(-1px); box-shadow: inset 0 -2px 0 rgba(0,0,0,.06), 0 6px 16px rgba(0,0,0,.06); }
.nav-item.active{ color: var(--brand-ink); background: linear-gradient(180deg, #fff, var(--p1)); }

.nav-back-icon{
  position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
  appearance: none; border: 0; cursor: pointer;
  padding: 8px 12px; font-weight: 800; font-size: 13px;
  color: #fff; background: linear-gradient(180deg, #0d3553, #0b273b);
  border-radius: 14px;
  box-shadow: 0 6px 0 rgba(0,0,0,.15);
  transition: transform .08s ease, box-shadow .2s ease, filter .2s ease;
}
.nav-back-icon:hover{ box-shadow: 0 10px 18px rgba(0,0,0,.18); filter: brightness(1.03); }
.nav-back-icon:active{ transform: translateY(1px); box-shadow: 0 4px 10px rgba(0,0,0,.18); }

/* =========================================================
   WRAPPER — Cloudy kawaii background (auto layout)
   ======================================================= */
.dfm-wrapper{
  min-height: calc(100dvh - 58px);
  display: grid; place-items: center;
  padding: clamp(8px, 2vw, 24px);
  background: radial-gradient(1200px 800px at 10% -10%, #eaf6ff, transparent 70%),
              radial-gradient(900px 700px at 110% 10%, #fff2fb, transparent 60%),
              radial-gradient(1200px 900px at 50% 120%, #fffbea, transparent 60%),
              var(--bg);
  position: relative; overflow: hidden;
}

/* floating pastel bubbles */
.dfm-wrapper::before,
.dfm-wrapper::after{
  content:""; position: absolute; inset: -20% -10% auto auto; height: 100%;
  background:
   radial-gradient(120px 120px at 10% 8%, var(--p1) 30%, transparent 60%),
   radial-gradient(180px 140px at 70% 12%, var(--p2) 28%, transparent 62%),
   radial-gradient(220px 160px at 25% 60%, var(--p3) 35%, transparent 65%),
   radial-gradient(200px 160px at 85% 80%, var(--p4) 30%, transparent 66%),
   radial-gradient(160px 120px at 5% 90%, var(--p5) 30%, transparent 60%);
  opacity: .5; filter: blur(16px);
  animation: floaty 28s linear infinite;
}
.dfm-wrapper::after{
  inset: auto auto -25% -10%;
  transform: scale(1.2);
  opacity: .45; filter: blur(18px);
  animation-duration: 36s;
}
@keyframes floaty{
  0% { transform: translateY(0) translateX(0) }
  50%{ transform: translateY(-18px) translateX(6px) }
  100%{ transform: translateY(0) translateX(0) }
}

/* =========================================================
   CARD / FORM — Glassy pastel + auto grid
   ======================================================= */
.dfm-card{
  width: min(100%, 1080px);
  background: linear-gradient(180deg, var(--card), var(--card-alt));
  border: 1.6px solid rgba(123,182,255,.45);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
  padding: clamp(16px, 3vw, 28px);
  position: relative; overflow: hidden;
  isolation: isolate;
}

/* subtle confetti sparkles */
.dfm-card::before{
  content:""; position: absolute; inset: -20% -10% auto auto; height: 80%;
  background-image:
     radial-gradient(3px 3px at 10% 10%, rgba(255,193,119,.6) 60%, transparent 61%),
     radial-gradient(3px 3px at 40% 20%, rgba(255,161,214,.6) 60%, transparent 61%),
     radial-gradient(3px 3px at 80% 30%, rgba(123,182,255,.6) 60%, transparent 61%),
     radial-gradient(3px 3px at 60% 70%, rgba(217,255,216,.6) 60%, transparent 61%);
  filter: blur(.2px);
  opacity: .6; pointer-events: none;
}

.dfm-header{
  display: grid; gap: 6px; margin-bottom: clamp(12px, 2vw, 18px);
  text-align: center;
}
.dfm-title{ display: inline-grid; grid-auto-flow: column; place-content: center; gap: 10px; }
.dfm-emoji{ font-size: clamp(24px, 3.2vw, 32px); filter: drop-shadow(0 2px 0 rgba(0,0,0,.06)); }
.dfm-header h1{ margin:0; font-size: var(--fz-title); color: var(--ink); letter-spacing: .2px; }
.dfm-sub{ margin:0; color: var(--ink-soft); font-size: var(--fz-sub); }

/* ---------- AUTO GRID (12 kolom → responsif) ---------- */
.dfm-grid{
  display: grid; gap: clamp(10px, 2vw, 18px);
  grid-template-columns: repeat(12, minmax(0,1fr));
}

/* Field block */
.dfm-field{
  grid-column: span 6;
  display: grid; gap: 8px;
  min-width: 0;
}
@media (max-width: 860px){ .dfm-field{ grid-column: span 12; } }

.dfm-field label{
  font-weight: 700; color: #3c5678; font-size: var(--fz-label);
  display: inline-flex; align-items: center; gap: 8px;
}
.dfm-field label::after{
  /* tiny sparkle emoji as dot */
  content: " ✨"; font-size: .9em; opacity: .5;
}

/* Inputs & Selects — soft neumorphic */
/* Inputs & Selects — semua kotak input sama (pill) */
.dfm-field input[type="text"],
.dfm-field input[type="number"],
.dfm-field input[type="tel"],
.dfm-field input[type="datetime-local"],
.dfm-field select {
  width: 100%;
  appearance: none;
  outline: none;
  border: 1.6px solid rgba(123,182,255,.55);
  background: linear-gradient(180deg, #ffffff, #fffdf8);
  /* bikin semua lonjong */
  border-radius: 999px;
  padding: 12px 16px;
  font-size: var(--fz-body);
  color: var(--ink);
  box-shadow:
    inset 0 -3px 0 rgba(0,0,0,.03),
    0 2px 0 rgba(0,0,0,.04);
  transition:
    box-shadow .18s ease,
    transform .06s ease,
    border-color .18s ease,
    background .18s ease;
}

.dfm-field input:focus,
.dfm-field select:focus {
  border-color: #ffc27a;
  box-shadow:
    0 0 0 6px rgba(255,194,122,.25),
    inset 0 -3px 0 rgba(0,0,0,.03);
}

.dfm-field input:active,
.dfm-field select:active {
  transform: translateY(1px);
}
.dfm-field input:focus, .dfm-field select:focus{
  border-color: #ffc27a;
  box-shadow: 0 0 0 6px rgba(255,194,122,.25), inset 0 -3px 0 rgba(0,0,0,.03);
}
.dfm-field input:active, .dfm-field select:active{ transform: translateY(1px); }

/* Number input tidy */
.dfm-field input[type="number"]::-webkit-outer-spin-button,
.dfm-field input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }

/* File input + preview */
.dfm-file input[type="file"]{
  padding: 10px; background: #f9fcff; border-radius: var(--radius-md);
  border: 1.6px dashed rgba(123,182,255,.75);
}
.dfm-photo-preview{
  border: 1.6px dashed rgba(123,182,255,.75);
  border-radius: var(--radius-lg);
  padding: 10px; background: #ffffff; margin-top: 8px;
  box-shadow: var(--shadow-sm);
}
.dfm-photo-preview img{ width: 100%; height: auto; border-radius: 12px; display: block; }

/* Readonly badges */
.dfm-readonly .dfm-badge{
  display: grid; place-items: center;
  min-height: 44px;
  padding: 10px 14px;
  background: linear-gradient(180deg, #fff5d8, #fff0ba);
  border: 1.6px solid #ffd87a;
  border-radius: 999px;
  font-weight: 800; color: #7a5c00;
  letter-spacing: .2px;
}

/* Signature board */
.dfm-sign{ grid-column: span 12; }
.dfm-signboard{
  background: #ffffff;
  padding: 12px;
  border: 1.6px dashed rgba(123,182,255,.9);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}
.dfm-signboard canvas{
  width: 100%; height: clamp(180px, 28dvh, 240px);
  background: repeating-linear-gradient(180deg, #fff, #fff 18px, #fef7ff 18px, #fef7ff 36px);
  border-radius: 12px; border: 1px solid #e1efff;
  touch-action: none; user-select: none;
}

/* =========================================================
   FOOTER & BUTTONS
   ======================================================= */
.dfm-footer{
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; margin-top: 14px; flex-wrap: wrap;
}
.dfm-summary{
  display: inline-flex; align-items: center; gap: 14px;
  background: linear-gradient(180deg, #f2f8ff, #ecf4ff);
  border: 1.6px solid rgba(123,182,255,.6);
  padding: 10px 14px; border-radius: var(--radius-md);
  font-size: var(--fz-body);
}

/* Buttons — pill kawaii */
.dfm-btn{
  border: 1.6px solid rgba(123,182,255,.7);
  background: linear-gradient(180deg, #ffffff, #fffaf7);
  color: var(--brand-ink);
  padding: 10px 16px;
  border-radius: 999px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 6px 0 rgba(0,0,0,.08);
  transition: transform .06s ease, box-shadow .18s ease, background .18s ease, filter .18s ease;
  font-size: var(--fz-body);
}
.dfm-btn:hover{ box-shadow: 0 10px 18px rgba(0,0,0,.10); filter: brightness(1.02); }
.dfm-btn:active{ transform: translateY(2px); box-shadow: 0 4px 10px rgba(0,0,0,.10); }

.dfm-btn.primary{
  background: linear-gradient(180deg, var(--p1), #cfe7ff);
  color: #0b273b;
  border-color: #9acbff;
}

.dfm-btn.ghost{
  background: linear-gradient(180deg, #ffffff, #f9fbff);
}

/* popup success */
.dfm-popup{
  position: fixed; left: 50%; bottom: 28px; transform: translateX(-50%);
  background: #ffffff;
  border: 1.6px solid rgba(123,182,255,.7);
  border-radius: 14px; padding: 10px 14px;
  box-shadow: var(--shadow-lg);
  animation: pop-in .28s ease-out, gently .9s ease-in-out .28s infinite alternate;
  font-weight: 700;
}
@keyframes pop-in{ from{ transform: translateX(-50%) translateY(8px); opacity: 0; } to{ transform: translateX(-50%) translateY(0); opacity: 1; } }
@keyframes gently{ from{ transform: translateX(-50%) translateY(0); } to{ transform: translateX(-50%) translateY(-3px); } }

/* =========================================================
   ACCESSIBILITY & PREFERENCES
   ======================================================= */
:focus-visible{
  outline: 3px dashed var(--focus);
  outline-offset: 3px;
  border-radius: 10px;
}
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: .001ms !important; scroll-behavior: auto !important; }
}

/* =========================================================
   RESPONSIVE TWEAKS
   ======================================================= */
@media (max-width: 640px){
  .nav-inner{ height: 54px; }
  .nav-back-icon{ padding: 7px 10px; font-size: 12px; }

  .dfm-summary{ width: 100%; justify-content: space-between; }
  .dfm-footer{ gap: 10px; }
}

/* tablet landscape padding */
@media (min-width: 861px) and (max-width: 1180px){
  .dfm-card{ padding: clamp(18px, 3vw, 24px); }
}

/* =========================================================
   DUPLICATE CLEANUP GUARD (jaga2 bila CSS lama masih nyangkut)
   ======================================================= */
.nav-inner, .nav-menu{
  /* pastikan tetap center walau ada override lain */
  display: flex; align-items: center; justify-content: center;
}

/* ====== FULL BLEED DESKTOP OVERRIDES ====== */
@media (min-width: 1200px){
  .dfm-wrapper{
    padding: 0 !important;        /* hapus padding pinggir */
    display: block !important;     /* jangan grid-center */
  }
  .dfm-card{
    width: 100% !important;        /* isi penuh */
    border-radius: 0 !important;   /* edge-to-edge */
    box-shadow: none !important;   /* menyatu sama bg */
    border-left: 0 !important;
    border-right: 0 !important;
  }
}

/* opsional: pakai 3 kolom biar ruang lega di layar lebar */
@media (min-width: 1440px){
  .dfm-field{ grid-column: span 4; } /* 12 kolom / 4 = 3 kolom */
}

/* pastikan root-nya juga full width */
html, body, #root { width: 100%; max-width: 100%; }

/* === Fix navbar mobile: no tumpuk, grid 2 kolom === */
@media (max-width: 520px){
  .nav-inner{
    display: grid !important;
    grid-template-columns: auto 1fr; /* [Kembali] | [menu] */
    align-items: center;
    height: 52px;
    padding: 0 10px !important;
  }

  /* tombol kembali tidak absolute lagi */
  .nav-back-icon{
    position: static !important;
    transform: none !important;
    padding: 6px 10px;
    border-radius: 12px;
    box-shadow: 0 4px 0 rgba(0,0,0,.12);
    margin-right: 8px;
  }

  /* menu berada di kolom kanan dan tetap center */
  .nav-menu{
    justify-self: center;
    justify-content: center;
    gap: 8px;
    flex-wrap: nowrap;
    overflow-x: auto;     /* kalau sempit, bisa geser horizontal */
    scrollbar-width: none;
  }
  .nav-menu::-webkit-scrollbar{ display: none; }

  .nav-item{
    padding: 6px 10px;
    font-size: 12px;
    white-space: nowrap;
  }

  /* hemat ruang: sembunyikan teks "Kembali" di layar sangat kecil */
  @media (max-width: 380px){
    .nav-back-txt{ display: none; }  /* icon-only */
    .nav-back-icon{ padding: 6px; }
  }
}

/* ================================================================== */
/*  EXTRA HELPER BUAT FORM MANIFEST BARU (KAPAL / RUTE / ASAL / TUJUAN) */
/* ================================================================== */

/* Field full-width (misal: Pilih Rute, Tanda Tangan, dll) */
.dfm-field--full {
  grid-column: span 12;
}

/* Kalau layar gede banget tapi kita tetap mau field full */
@media (min-width: 1440px) {
  .dfm-field--full {
    grid-column: span 12;
  }
}

/* Input yang pakai datalist (kapal & asal) — biar terasa kayak select */
.dfm-field input[list] {
  padding-right: 40px; /* ruang untuk panah */
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(123,182,255,.9) 50%),
    linear-gradient(135deg, rgba(123,182,255,.9) 50%, transparent 50%);
  background-position:
    calc(100% - 22px) 50%,
    calc(100% - 16px) 50%;
  background-size: 7px 7px, 7px 7px;
  background-repeat: no-repeat;
}

/* Optional: bedain sedikit badge rute biar keliatan info rute */
.dfm-readonly.dfm-field-rute .dfm-badge {
  background: linear-gradient(180deg, #e9f4ff, #ddeaff);
  border-color: #9acbff;
  color: #214066;
  font-weight: 700;
  justify-content: center;
  text-align: center;
}

/* Kalau mau rute selalu 1 baris full di grid */
.dfm-field-rute {
  grid-column: span 12;
}
@media (max-width: 860px) {
  .dfm-field-rute {
    grid-column: span 12;
  }
}
/* ==== FIX: input Nama Kapal & Keberangkatan Asal jadi terang lagi ==== */

/* Paksa semua input & select di dalam kartu pakai tema terang */
.dfm-card {
  color-scheme: light;
}

.dfm-card input,
.dfm-card select {
  background: linear-gradient(180deg, #ffffff, #fffdf8) !important;
  color: var(--ink) !important;
  border: 1.6px solid rgba(123,182,255,.55) !important;
}

/* Placeholder biar nggak abu-abu pekat */
.dfm-card input::placeholder {
  color: var(--ink-soft);
}

/* Khusus input yang pakai datalist (Nama Kapal & Asal) */
.dfm-field input[list] {
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(180deg, #ffffff, #fffdf8) !important;
  padding-right: 28px;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(123,182,255,.9) 50%),
    linear-gradient(135deg, rgba(123,182,255,.9) 50%, transparent 50%);
  background-position: calc(100% - 18px) 16px, calc(100% - 12px) 16px;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}
.dfm-field-hint {
  font-size: 12px;
  color: #666;
  margin-top: 4px;
  font-style: italic;
}